void fitAsymmetry() {


	TFile *file0para = TFile::Open("kpkpxim_0para_notfull_sept27.root");
	TFile *file90perp = TFile::Open("kpkpxim_90perp_notfull_sept27.root");
	TFile *file135para = TFile::Open("kpkpxim_135para_notfull_sept27.root");
	TFile *file45perp = TFile::Open("kpkpxim_45perp_notfull_sept27.root");
	TFile *fileamo = TFile::Open("kpkpxim_amo_notfull_sept27.root");
	//TFile *file0para6 = TFile::Open("./../ver06_sept18/kpkpxim_0para_sept27.root");
	//TFile *file90perp6 = TFile::Open("./../ver06_sept18/kpkpxim_90perp_sept27.root");
	TFile file("test.root","RECREATE");


	TH2F *h2para0 = (TH2F*)file0para->Get("phi_t"); h2para0->Rebin2D(10, 15);
	TH2F *h2perp90 = (TH2F*)file90perp->Get("phi_t"); h2perp90->Rebin2D(10, 15);
	TH2F *h2para135 = (TH2F*)file135para->Get("phi_t"); h2para135->Rebin2D(10, 15);
	TH2F *h2perp45 = (TH2F*)file45perp->Get("phi_t"); h2perp45->Rebin2D(10, 15);
	//TH2F *h2para06 = (TH2F*)file0para6->Get("phi_t"); h2para06->Rebin2D(10, 15);
	//TH2F *h2perp906 = (TH2F*)file90perp6->Get("phi_t"); h2perp906->Rebin2D(10, 15);

	TH2F *h2para0acc = (TH2F*)file0para->Get("acc_phi_t_1"); h2para0acc->Rebin2D(10, 15);
	TH2F *h2perp90acc = (TH2F*)file90perp->Get("acc_phi_t_1"); h2perp90acc->Rebin2D(10, 15);
	TH2F *h2para0acc4 = (TH2F*)file0para->Get("acc_phi_t_4"); h2para0acc4->Rebin2D(10, 15);
	TH2F *h2perp90acc4 = (TH2F*)file90perp->Get("acc_phi_t_4"); h2perp90acc4->Rebin2D(10, 15);
	TH2F *h2para135acc = (TH2F*)file135para->Get("acc_phi_t_1"); h2para135acc->Rebin2D(10, 15);
	TH2F *h2perp45acc = (TH2F*)file45perp->Get("acc_phi_t_1"); h2perp45acc->Rebin2D(10, 15);
	//TH2F *h2para06acc = (TH2F*)file0para6->Get("acc_phi_t_1"); h2para06acc->Rebin2D(10, 15);
	//TH2F *h2perp906acc = (TH2F*)file90perp6->Get("acc_phi_t_1"); h2perp906acc->Rebin2D(10, 15);

	TH1F *hpara0temp = (TH1F*)h2para0->ProjectionY("phi_0para");
	TH1F *hperp90temp = (TH1F*)h2perp90->ProjectionY("phi_90perp");
	TH1F *hpara135temp = (TH1F*)h2para135->ProjectionY("phi_135para");
	TH1F *hperp45temp = (TH1F*)h2perp45->ProjectionY("phi_45perp");
	//TH1F *hpara06temp = (TH1F*)h2para06->ProjectionY("phi_0parav6");
	//TH1F *hperp906temp = (TH1F*)h2perp906->ProjectionY("phi_90perpv6");

	TH1F *hpara0tempacc = (TH1F*)h2para0acc->ProjectionY("phi_0para_acc");
	TH1F *hperp90tempacc = (TH1F*)h2perp90acc->ProjectionY("phi_90perp_acc4");
	TH1F *hpara0tempacc4 = (TH1F*)h2para0acc4->ProjectionY("phi_0para_acc4");
	TH1F *hperp90tempacc4 = (TH1F*)h2perp90acc4->ProjectionY("phi_90perp_acc");
	TH1F *hpara135tempacc = (TH1F*)h2para135acc->ProjectionY("phi_135para_acc");
	TH1F *hperp45tempacc = (TH1F*)h2perp45acc->ProjectionY("phi_45perp_acc");
	//TH1F *hpara06tempacc = (TH1F*)h2para06acc->ProjectionY("phi_0parav6_acc");
	//TH1F *hperp906tempacc = (TH1F*)h2perp906acc->ProjectionY("phi_90perpv6_acc");

	TH1F *hpara0acc = (TH1F*)hpara0temp->Clone("phi_0para_accsub"); 
	TH1F *hperp90acc = (TH1F*)hperp90temp->Clone("phi_90perp_accsub"); 
	TH1F *hpara0acc4 = (TH1F*)hpara0temp->Clone("phi_0para_accsub4"); 
	TH1F *hperp90acc4 = (TH1F*)hperp90temp->Clone("phi_90perp_accsub4"); 
	TH1F *hpara135acc = (TH1F*)hpara135temp->Clone("phi_135para_accsub"); 
	TH1F *hperp45acc = (TH1F*)hperp45temp->Clone("phi_45perp_accsub"); 
	//TH1F *hpara06acc = (TH1F*)hpara06temp->Clone("phi_0parav6_accsub"); 
	//TH1F *hperp906acc = (TH1F*)hperp906temp->Clone("phi_90perpv6_accsub"); 

	hpara0acc->Add(hpara0tempacc,-0.5);
	hperp90acc->Add(hperp90tempacc,-0.5);
	hpara0acc4->Add(hpara0tempacc4,-0.125);
	hperp90acc4->Add(hperp90tempacc4,-0.125);
	hpara135acc->Add(hpara135tempacc,-0.5);
	hperp45acc->Add(hperp45tempacc,-0.5);
	//hpara06acc->Add(hpara06tempacc,-0.5);
	//hperp906acc->Add(hperp906tempacc,-0.5);

	hasym090 = (TH1F*)hperp90acc->GetAsymmetry(hpara0acc);
	TH1 *hasym0904 = hperp90acc4->GetAsymmetry(hpara0acc4);
	TH1 *hasym45135 = hperp45acc->GetAsymmetry(hpara135acc);
	//TH1 *hasym090v6 = hperp906acc->GetAsymmetry(hpara06acc);

	test = (TH1F*)hasym090->Clone("testasidkfjaslkdfj");

	TH1F *hsumacc090 = (TH1F*)hpara0acc->Clone("sum090"); 
	TH1F *hsumacc0904 = (TH1F*)hpara0acc4->Clone("sum090_4"); 
	TH1F *hsumacc45135 = (TH1F*)hpara135acc->Clone("sum45135"); 
	//TH1F *hsumacc090v6 = (TH1F*)hpara06acc->Clone("sum090v6"); 

	hsumacc090->Add(hperp90acc);
	hsumacc0904->Add(hperp90acc4);
	hsumacc45135->Add(hperp45acc);
	//hsumacc090v6->Add(hperp906acc);

	TCanvas *cc1 = new TCanvas("cc1", "cc1", 800, 600);
	TCanvas *cc2 = new TCanvas("cc2", "cc2", 800, 600);
	TCanvas *cc3 = new TCanvas("cc3", "cc3", 800, 600);
	TCanvas *cc4 = new TCanvas("cc4", "cc4", 800, 600);
	cc1->Divide(3,2);
	cc2->Divide(3,2);
	cc3->Divide(3,2);
	cc4->Divide(3,2);

	cc1->cd(1);
	TF1* fperp90 = new TF1("fitperp90","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp90->SetParNames("Norm","PSigma","Offset");
	fperp90->FixParameter(2,90);
	fperp90->SetLineColor(kRed);
	hperp90temp->Fit(fperp90, "", "");
	hperp90temp->SetTitle("Perp");
	hperp90temp->Draw("e");
	cc2->cd(1);
	TF1* fperp904 = new TF1("fitperp904","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp904->SetParNames("Norm","PSigma","Offset");
	fperp904->FixParameter(2,90);
	fperp904->SetLineColor(kRed);
	hperp90temp->Fit(fperp904, "", "");
	hperp90temp->SetTitle("Perp");
	hperp90temp->Draw("e");
	cc3->cd(1);
	TF1* fperp45 = new TF1("fitperp45","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp45->SetParNames("Norm","PSigma","Offset");
	fperp45->FixParameter(2,45);
	fperp45->SetLineColor(kRed);
	hperp45temp->Fit(fperp45, "", "");
	hperp45temp->SetTitle("Perp");
	hperp45temp->Draw("e");
	/*cc4->cd(1);
	TF1* fperp906 = new TF1("fitperp906","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp906->SetParNames("Norm","PSigma","Offset");
	fperp906->FixParameter(2,90);
	fperp906->SetLineColor(kRed);
	hperp906temp->Fit(fperp906, "", "");
	hperp906temp->SetTitle("Perp");
	hperp906temp->Draw("e");
*/
	cc1->cd(2);
	TF1* fperp90a = new TF1("fitperp90a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp90a->SetParNames("Norm","PSigma","Offset");
	fperp90a->FixParameter(2,90);
	fperp90a->SetLineColor(kRed);
	hperp90tempacc->Scale(0.5);
	hperp90tempacc->Fit(fperp90a, "", "");
	hperp90tempacc->SetTitle("Perp accidentals");
	hperp90tempacc->Draw("e");
	cc2->cd(2);
	TF1* fperp904a = new TF1("fitperp904a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp904a->SetParNames("Norm","PSigma","Offset");
	fperp904a->FixParameter(2,90);
	fperp904a->SetLineColor(kRed);
	hperp90tempacc4->Scale(0.125);
	hperp90tempacc4->Fit(fperp904a, "", "");
	hperp90tempacc4->SetTitle("Perp accidentals");
	hperp90tempacc4->Draw("e");
	cc3->cd(2);
	TF1* fperp45a = new TF1("fitperp45a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp45a->SetParNames("Norm","PSigma","Offset");
	fperp45a->FixParameter(2,45);
	fperp45a->SetLineColor(kRed);
	hperp45tempacc->Scale(0.5);
	hperp45tempacc->Fit(fperp45a, "", "");
	hperp45tempacc->SetTitle("Perp accidentals");
	hperp45tempacc->Draw("e");
	cc4->cd(2);
	/*
	TF1* fperp906a = new TF1("fitperp906a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fperp906a->SetParNames("Norm","PSigma","Offset");
	fperp906a->FixParameter(2,90);
	fperp906a->SetLineColor(kRed);
	hperp906tempacc->Scale(0.5);
	hperp906tempacc->Fit(fperp906a, "", "");
	hperp906tempacc->SetTitle("Perp accidentals");
	hperp906tempacc->Draw("e");
	*/
	cc1->cd(3);
	hsumacc090->SetTitle("Sum");
	hsumacc090->Draw();
	cc2->cd(3);
	hsumacc0904->SetTitle("Sum");
	hsumacc0904->Draw();
	cc3->cd(3);
	hsumacc45135->SetTitle("Sum");
	hsumacc45135->Draw();
	//cc4->cd(3);
	//hsumacc090v6->SetTitle("Sum");
	//hsumacc090v6->Draw();

	cc1->cd(4);
	TF1* fpara0 = new TF1("fitpara0","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara0->SetParNames("Norm","PSigma","Offset");
	fpara0->FixParameter(2,0);
	fpara0->SetLineColor(kRed);
	hpara0temp->Fit(fpara0, "", "");
	hpara0temp->SetTitle("Para");
	hpara0temp->Draw("e");
	cc2->cd(4);
	TF1* fpara04 = new TF1("fitpara04","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara04->SetParNames("Norm","PSigma","Offset");
	fpara04->FixParameter(2,0);
	fpara04->SetLineColor(kRed);
	hpara0temp->Fit(fpara04, "", "");
	hpara0temp->SetTitle("Para");
	hpara0temp->Draw("e");
	cc3->cd(4);
	TF1* fpara135 = new TF1("fitpara135","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara135->SetParNames("Norm","PSigma","Offset");
	fpara135->FixParameter(2,135);
	fpara135->SetLineColor(kRed);
	hpara135temp->Fit(fpara135, "", "");
	hpara135temp->SetTitle("Para");
	hpara135temp->Draw("e");
	cc4->cd(4);
/*	TF1* fpara06 = new TF1("fitpara06","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara06->SetParNames("Norm","PSigma","Offset");
	fpara06->FixParameter(2,0);
	fpara06->SetLineColor(kRed);
	hpara06temp->Fit(fpara06, "", "");
	hpara06temp->SetTitle("Para");
	hpara06temp->Draw("e");
*/
	cc1->cd(5);
	TF1* fpara0a = new TF1("fitpara0a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara0a->SetParNames("Norm","PSigma","Offset");
	fpara0a->FixParameter(2,0);
	fpara0a->SetLineColor(kRed);
	hpara0tempacc->Scale(0.5);
	hpara0tempacc->Fit(fpara0a, "", "");
	hpara0tempacc->SetTitle("Para accidentals");
	hpara0tempacc->Draw("e");
	cc2->cd(5);
	TF1* fpara04a = new TF1("fitpara04a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara04a->SetParNames("Norm","PSigma","Offset");
	fpara04a->FixParameter(2,0);
	fpara04a->SetLineColor(kRed);
	hpara0tempacc4->Scale(0.125);
	hpara0tempacc4->Fit(fpara04a, "", "");
	hpara0tempacc4->SetTitle("Para accidentals");
	hpara0tempacc4->Draw("e");
	cc3->cd(5);
	TF1* fpara135a = new TF1("fitpara135a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara135a->SetParNames("Norm","PSigma","Offset");
	fpara135a->FixParameter(2,135);
	fpara135a->SetLineColor(kRed);
	hpara135tempacc->Scale(0.5);
	hpara135tempacc->Fit(fpara135a, "", "");
	hpara135tempacc->SetTitle("Para accidentals");
	hpara135tempacc->Draw("e");
/*	cc4->cd(5);
	TF1* fpara06a = new TF1("fitpara06a","[0]*(1.0 + [1]*cos(2*(x + [2])/180.*3.14159))");
	fpara06a->SetParNames("Norm","PSigma","Offset");
	fpara06a->FixParameter(2,0);
	fpara06a->SetLineColor(kRed);
	hpara06tempacc->SetTitle("Para accidentals");
	hpara06tempacc->Scale(0.5);
	hpara06tempacc->Fit(fpara06a, "", "");
	hpara06tempacc->Draw("e");
*/
	cc1->cd(6);
	TF1* fitasym090 = new TF1("fitasym090","[0]*cos(2*(x + [1])/180.*3.14159)");
	fitasym090->SetParNames("PSigma","Offset");
	fitasym090->FixParameter(1,0);
	fitasym090->SetLineColor(kRed);
	hasym090->Fit(fitasym090, "", "");
	hasym090->SetTitle("Asymmetry");	
	hasym090->Draw("e");
	cc2->cd(6);
	TF1* fitasym0904 = new TF1("fitasym0904","[0]*cos(2*(x + [1])/180.*3.14159)");
	fitasym0904->SetParNames("PSigma","Offset");
	fitasym0904->FixParameter(1,0);
	fitasym0904->SetLineColor(kRed);
	hasym0904->Fit(fitasym0904, "", "");
	hasym0904->SetTitle("Asymmetry");
	hasym0904->Draw("e");
	cc3->cd(6);
	TF1* fitasym45135 = new TF1("fitasym45135","[0]*cos(2*(x + [1])/180.*3.14159)");
	fitasym45135->SetParNames("PSigma","Offset");
	fitasym45135->FixParameter(1,45);
	fitasym45135->SetLineColor(kRed);
	hasym45135->Fit(fitasym45135, "", "");
	hasym45135->SetTitle("Asymmetry");
	hasym45135->Draw("e");
/*	cc4->cd(6);
	TF1* fitasym0906 = new TF1("fitasym0906","[0]*cos(2*(x + [1])/180.*3.14159)");
	fitasym0906->SetParNames("PSigma","Offset");
	fitasym0906->FixParameter(1,0);
	fitasym0906->SetLineColor(kRed);
	hasym090v6->SetTitle("Asymmetry");
	hasym090v6->Fit(fitasym0906, "", "");
	hasym090v6->Draw("e");
*/
	cc1->Print("asymm090.png");
	cc2->Print("asymm0904.png");
	cc3->Print("asymm45135.png");
	//cc4->Print("asymm090v6.png");
	
	hasym090->Write();
	test->Write();
	
	return;	
	file.Write();
	file.Close();
}
